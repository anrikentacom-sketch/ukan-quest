<!DOCTYPE html>
<html>

<head>
    <meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
    <title>風の勇者の休日 POC - AR</title>
    <!-- A-Frame -->
    <script src="https://aframe.io/releases/1.4.2/aframe.min.js"></script>
    <!-- MindAR for A-Frame (Image Tracking for stability in POC, or GPS) -->
    <!-- For this POC step 3, we use a simple GPS-like simulation or Image Tracking fallback. 
         Ideally MindAR.js or AR.js location-based. 
         Using AR.js for location-based simply as it is vanilla compatible for rapid POC. -->
    <script src='https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar-nft.js'></script>

    <style>
        .ui-overlay {
            position: fixed;
            top: 20px;
            left: 0;
            width: 100%;
            text-align: center;
            z-index: 100;
            pointer-events: none;
        }

        .status-box {
            background: rgba(0, 0, 0, 0.6);
            color: white;
            padding: 10px;
            border-radius: 10px;
            display: inline-block;
        }

        .back-btn {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: #d63031;
            color: white;
            padding: 10px 20px;
            border-radius: 20px;
            text-decoration: none;
            pointer-events: auto;
            z-index: 100;
        }
    </style>
</head>

<body style="margin: 0; overflow: hidden;">

    <div class="ui-overlay">
        <div class="status-box">
            GPS AR TEST<br>
            <small>北の方角に赤い箱が出ます（シミュレーション）</small>
        </div>
    </div>

    <a href="index.html" class="back-btn">地図に戻る</a>

    <!-- Simple AR Scene (Camera Overlay + Fixed 3D Object) -->
    <!-- Removed GPS dependency to ensure visibility for system check -->
    <a-scene embedded
        arjs="sourceType: webcam; debugUIEnabled: false; detectionMode: mono_and_matrix; matrixCodeType: 3x3;">

        <!-- Red Box fixed in front of camera (HUD style) -->
        <a-box position="0 0 -3" rotation="0 45 0" color="#ef5777" scale="0.5 0.5 0.5"
            animation="property: rotation; to: 0 405 0; loop: true; dur: 2000">
        </a-box>

        <a-text value="AR SYSTEM OK" position="0 1 -3" align="center" color="yellow" scale="1.5 1.5 1.5"></a-text>

        <!-- Standard Camera -->
        <a-marker-camera preset="hiro"></a-marker-camera>
        <!-- Fallback to simple camera if marker fails, 
             but for 'looking around' without markers in AR.js, 
             we actually typically use specific setups. 
             Let's try the simplest 'looking glass' approach. -->
        <a-camera position="0 0 0" look-controls="enabled: false"></a-camera>

    </a-scene>

</body>

</html>